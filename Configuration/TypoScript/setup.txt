page.includeCSS {
  jh_magnificpopup10 = {$plugin.tx_jhmagnificpopup.includeMagnificpopupCss}
  jh_magnificpopup10.if.isTrue = {$plugin.tx_jhmagnificpopup.includeMagnificpopupCss}
}

page.includeJSFooterlibs {
  jh_magnificpopup10 = EXT:jh_magnificpopup/Resources/Public/js/jquery-1.10.2.min.js
  jh_magnificpopup10.forceOnTop = 1
  jh_magnificpopup10.if.isTrue = {$plugin.tx_jhmagnificpopup.includejquerycore}

  jh_magnificpopup20 = {$plugin.tx_jhmagnificpopup.includeMagnificpopupJs}
  jh_magnificpopup20.if.isTrue = {$plugin.tx_jhmagnificpopup.includeMagnificpopupJs}
}

plugin.jh_magnificpopup {
	setup {
		10 = COA
		10 {
			wrap = jQuery(document).ready(function($) {|});
			10 = COA
			10 {
				wrap = $('.csc-textpic').each(function() {|});
				20 = COA
				20 {
					wrap = $(this).magnificPopup({|});
					10 = TEXT
					10.value = delegate: '.magnificpopup',
					20 = TEXT
					20.value = tClose: '{LLL:EXT:jh_magnificpopup/Resources/Private/Language/locallang.xml:tClose}',
					20.insertData = 1
					30 = TEXT
					30.value = type: 'image',
					40 = TEXT
					40.value = tLoading: '{LLL:EXT:jh_magnificpopup/Resources/Private/Language/locallang.xml:tLoading}',
					40.insertData = 1
					50 = TEXT
					50.value = mainClass: 'mfp-img-mobile',
					60 = COA
					60 {
						wrap = gallery: {|},
						10 = TEXT
						10.value = enabled: {$plugin.tx_jhmagnificpopup.magnificpopup.gallery.enabled},
						20 = TEXT
						20.value = preload: [{$plugin.tx_jhmagnificpopup.magnificpopup.gallery.preload.before},{$plugin.tx_jhmagnificpopup.magnificpopup.gallery.preload.after}],
						30 = TEXT
						30.value = navigateByImgClick: {$plugin.tx_jhmagnificpopup.magnificpopup.gallery.navigateByImgClick},
						40 = TEXT
						40.value = arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
						50 = TEXT
						50.value = tPrev: '{LLL:EXT:jh_magnificpopup/Resources/Private/Language/locallang.xml:tPrev}',
						50.insertData = 1
						60 = TEXT
						60.value = tNext: '{LLL:EXT:jh_magnificpopup/Resources/Private/Language/locallang.xml:tNext}',
						60.insertData = 1
						70 = TEXT
						70.value = tCounter: '{LLL:EXT:jh_magnificpopup/Resources/Private/Language/locallang.xml:tCounter}'
						70.insertData = 1
					}
					70 = COA
					70 {
						wrap = image: {|}
						10 = TEXT
						10.value = cursor: '{$plugin.tx_jhmagnificpopup.magnificpopup.image.cursor}',
						20 = TEXT
						20.value = titleSrc: 'title',
						30 = TEXT
						30.value = verticalGap: {$plugin.tx_jhmagnificpopup.magnificpopup.image.verticalGap},
						30 = TEXT
						30.value = verticalFit: {$plugin.tx_jhmagnificpopup.magnificpopup.image.verticalFit},
						40 = TEXT
						40.value = tError: '{LLL:EXT:jh_magnificpopup/Resources/Private/Language/locallang.xml:tError}'
						40.insertData = 1
					}
				}
			}
		}
	}
}

//add javascript to footer
page.jsFooterInline < plugin.jh_magnificpopup.setup

// enable lightbox, add the right class and remove the unused rel-attriubute
styles.content.imgtext.linkWrap {
	lightboxEnabled = 1
	lightboxCssClass = magnificpopup
	lightboxRelAttribute >
}

// images in content elements
tt_content.image.20.1.imageLinkWrap {
  JSwindow = 0
  directImageLink = 1
  linkParams.ATagParams.dataWrap = class="magnificpopup"
}

// images in RTE
lib.parseFunc_RTE.tags.img.postUserFunc.imageLinkWrap {
  JSwindow = 0
  directImageLink = 1
  linkParams.ATagParams.dataWrap = class="magnificpopup"
}
